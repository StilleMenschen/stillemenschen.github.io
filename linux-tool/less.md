# less

## 简介

less 是类似于 more 的程序，但是它允许在文件中向后以及向前移动。此外，启动前不必读取整个输入文件，因此，对于大型输入文件
，其启动速度比诸如 vi 之类的文本编辑器更快。

命令基于 more 和 vi。命令前面可以有一个十进制数，在下面的描述中称为 N。

```
less -?
less --help
less -V
less --version
less [-[+]aABcCdeEfFgGiIJKLmMnNqQrRsSuUVwWX~]
     [-b space] [-h lines] [-j line] [-k keyfile]
     [-{oO} logfile] [-p pattern] [-P prompt] [-t tag]
     [-T tagsfile] [-x tab,...] [-y lines] [-[z] lines]
     [-# shift] [+[+]cmd] [--] [filename]...
```

## 命令

<style>
table th:first-of-type {
    width: 20%;
}
</style>

使用 less 打开文件后，默认为查看文件，此时可以直接输入命令

| 命令            | 说明                                                   |
| :-------------- | :----------------------------------------------------- |
| e, j            | 向后滚动 1 行                                          |
| f               | 向后滚动 1 页                                          |
| [N]z            | 向后滚动 N 行，如果不设置 N 则与 f 行为类似            |
| d               | 输入数字可指定向后滚动 N 行，如`7d`，默认半屏          |
| u               | 输入数字可指定向前滚动 N 行，如`7u`，默认半屏          |
| y, k            | 向前滚动 1 行                                          |
| b               | 向前滚动 1 页                                          |
| [N]w            | 向前滚动 N 行，如果不设置 N 则与 b 行为类似            |
| g               | 输入数字指定跳转到第 N 行，如`7g`，默认跳转到第 1 行   |
| G               | 输入数字指定跳转到第 N 行，如`7G`，默认跳转到最后 1 行 |
| p, %            | 输入数字指定跳转到文档百分之 N 位置，如`7p`或`7%`      |
| F               | 追踪文件新增内容，按 Ctrl+C 终止；查看 log 文件很有用  |
| /pattern        | 输入表达式向后搜索                                     |
| ?pattern        | 输入表达式向前搜索                                     |
| n               | 下一个搜索匹配项                                       |
| N               | 上一个搜索匹配项                                       |
| &pattern        | 搜索完全与表达式匹配的行                               |
| q, Q            | 退出                                                   |
| v               | 查找一个编辑器打开当前文件编辑                         |
| ! shell-command | 执行 shell 命令                                        |

> 在命令行中使用 + 可以直接执行指令，如 `+G` 表示打开文件后立即滚动到最后一行，
> 使用键盘上的翻页按键和方向按键也可以移动

## 选项

| 选项                      | 说明                                      |
| :------------------------ | :---------------------------------------- |
| -i, --ignore-case         | 指定搜索忽略大小写                        |
| -g, --hilite-search       | 指定每次只高亮下一个查找匹配项            |
| -G, --HILITE-SEARCH       | 禁用高亮所有查找匹配项                    |
| -m                        | 显示与`more`类似的百分比                  |
| -M                        | 显示与`more`类似的百分比，并且显示行范围  |
| -N                        | 展示行号（左侧有一定缩进）                |
| -ppattern                 | 指定从表达式`pattern`搜索到的位置开始查看 |
| -s, --squeeze-blank-lines | 将连续的空行转换为一个空行                |
| -S, --chop-long-lines     | 截断超过屏幕宽度的行                      |

> 使用 less 打开了文件之后，也可以直接更改选项，如直接输入 `-i` 就是忽略大小写搜索

## 示例

1. 打开文件并展示行范围高亮搜索范围

   ```bash
   less -gM app.log
   ```

2. 打开文件，截断超过屏幕宽度的行且默认滚动到底部

   ```bash
   less -S +G app.log
   ```

Last Modified 2024-04-13
