# top

## 简介

top 程序提供了一个正在运行的动态实时视图系统。它可以显示系统摘要信息以及当前由 Linux 管理的进程或线程列表核心。
显示的系统摘要信息的类型和为进程显示的信息的类型、顺序和大小是所有用户可配置并且可以进行配置持续重启

## 全局命令

<style>
table th:first-of-type {
    width: 30%;
}
</style>

运行 top 后，最重要的两个命令是`h`(帮助)和`q`(退出)

| 按键  | 操作                                                                                                            |
| ----- | --------------------------------------------------------------------------------------------------------------- |
| h     | 显示帮助                                                                                                        |
| q     | 退出                                                                                                            |
| Up    | 向上                                                                                                            |
| Down  | 向下                                                                                                            |
| Left  | 向左                                                                                                            |
| Right | 向右                                                                                                            |
| PgDn  | 下一页                                                                                                          |
| PgUp  | 上一页                                                                                                          |
| 0     | 是否忽略显示为零的值                                                                                            |
| A     | 切换显示全屏模式和交互式模式(按 g 可以在交互式模式中选择分组)                                                   |
| B     | 切换加粗显示数值                                                                                                |
| d     | 重新设置自动刷新时间(秒,整数)                                                                                   |
| s     | 重新设置自动刷新时间(秒,整数)                                                                                   |
| E     | 切换上方摘要中的内存数据单位 (KiB、MiB、GiB 等)                                                                 |
| e     | 切换下方列表中的内存数据单位 (KiB、MiB、GiB 等)                                                                 |
| g     | 选取分组(交互式模式可用)                                                                                        |
| H     | 切换上方摘要中的线程显示                                                                                        |
| k     | 发送 kill 信号(需要手动输入进程 PID 和信号量)                                                                   |
| X     | 设置下方的列宽度(正整数,0 为默认,-1 表示自动)                                                                   |
| C     | 显示列表滚动信息                                                                                                |
| l     | 切换上方摘要的系统运行时间和系统负载显示和隐藏                                                                  |
| t     | 切换上方摘要中 CPU 使用率和进程的显示方式                                                                       |
| m     | 切换上方摘要中内存和交换空间的显示方式                                                                          |
| 1     | 切换上方摘要中 CPU 核心汇总展示和分开展示                                                                       |
| J     | 切换下方列表数值列对齐方式                                                                                      |
| j     | 切换下方列表字符列对齐方式                                                                                      |
| b     | 切换下方列表高亮展示方式                                                                                        |
| y     | 切换显示下方列表行高亮                                                                                          |
| x     | 切换显示下方列表列高亮                                                                                          |
| z     | 切换下方列表展示颜色                                                                                            |
| c     | 切换下方列表展示完整的命令行                                                                                    |
| f     | 配置下发列表显示字段(上下箭头移动、右箭头选中、左箭头取消选中、s 设置排序字段、空格切换展示隐藏、q 或<Esc>退出) |
| F     | 配置下发列表显示字段(上下箭头移动、右箭头选中、左箭头取消选中、s 设置排序字段、空格切换展示隐藏、q 或<Esc>退出) |

## 选项

| 选项           | 说明                                                                                                 |
| -------------- | ---------------------------------------------------------------------------------------------------- |
| -d [secs]      | 指定界面刷新间隔时间 (秒,整数)                                                                       |
| -H             | 打开后进入线程查看模式                                                                               |
| -n [nums]      | 指定自动刷新`nums`次后自动退出                                                                       |
| -o [field]     | 指定参考`field`字段名来排序                                                                          |
| -O             | 展示`-o`选项支持的`field`字段名                                                                      |
| -p [pid]       | 过滤指定进程 ID 的程序，可以多次使用此选项                                                           |
| -u [uid\|user] | 过滤指定用户名或用户 ID 关联的进程 (用户必须是存在的)，在用户前加`!`表示排除，过滤非此用户关联的进程 |

## 摘要

从上往下

- 第一部分包括系统自最后一次启动以来运行的时间(时分秒、天)、当前登录用户数(users)、系统负载(1 分钟、5 分钟、15 分钟)
- 第二部分包括进程或线程统计、CPU 和内存使用率
  - 进程或线程包括总计(total)、运行中(running)、睡眠中(sleeping)、停止(stoped)、僵死(zombie)
  - CPU 使用率包括用户进程时间(us,user)、系统内核时间(sy,system)、调度优先级(ni,nice)、空闲内核时间(id,idle)、IO 等待时间(wa,io-wait)、time spent servicing hardware interrupts (hi)、time spent servicing software interrupts (si)、time stolen from this vm by the hypervisor (st)
  - 内存和交换空间使用率包括总计(total)、空闲(free)、已使用(used)、缓存(buff/cache)、可用(avail)

## 数据单位

- KiB = kibibyte = 1024 bytes
- MiB = mebibyte = 1024 KiB = 1,048,576 bytes
- GiB = gibibyte = 1024 MiB = 1,073,741,824 bytes
- TiB = tebibyte = 1024 GiB = 1,099,511,627,776 bytes
- PiB = pebibyte = 1024 TiB = 1,125,899,906,842,624 bytes
- EiB = exbibyte = 1024 PiB = 1,152,921,504,606,846,976 bytes

## 命令示例

Last Modified 2021-07-12
