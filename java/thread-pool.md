# 线程池

## 为什么使用

- 降低线程创建回收的频率
- 防止因程序错误频繁创建线程
- 易于维护线程状态
- 易于维护任务执行状态

## JDK 中的线程池

- 使用一个 32 位整数来保存线程池状态和线程数量
  - 高 3 位为线程池状态
  - 低 29 位保存工作线程数
  - 保存此数据的类型为 `AtomicInteger` 的原子类型
  - 可以支持同时对线程池状态和工作线程数做修改，省去加锁的步骤
- 线程池状态
  - RUNNING 接受新任务，同时处理阻塞队列中的任务
  - SHUTDOWN 不接受新任务，但仍处理阻塞队列中的任务
  - STOP 不接受新任务，不处理阻塞队列中的任务，中断正在运行中的任务
  - TIDYING 所有任务已执行完毕，已无工作线程，即将调用 `terminated()` 方法
  - TERMINATED `terminated()` 方法已调用完成

Last Modified 2022-01-20
