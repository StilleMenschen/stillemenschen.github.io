# 高性能

## 加载脚本

- 合并多个`javascript`脚本
- 异步下载脚本，如动态创建`<script>`标签或使用`XHR`对象加载`javascript`代码注入页面

## 数据访问

- 访问直接量和局部变量速度最快，而访问数组元素和对象成员相对较慢
- 变量在作用域链中的位置越深，访问所需的时间越长。由于全局变量总处在作用域链的最末端，因此访问速度也是最慢的
- 尽量少使用多级嵌套的对象成员
- 属性和方法在原型链中的位置越深，访问它的速度也越慢
- 创建局部变量引用对象成员、数组元素、跨域变量，加快访问速度

## DOM

- 减少`DOM`的访问次数，先完成计算再渲染
- 频繁访问的`DOM`节点应该使用局部变量存储引用
- 尽量使用标准的`API`来查询`DOM`，如`document.querySelectorAll`和`firstElementChild`
- 减少页面的重绘和重排，可以先缓存元素再操作，或者使用`document.createDocumentFragment`（推荐），再或者先克隆元素修改完成后再替换
- 通过事件委托（由父级元素来处理其子节点的事件）来减少事件处理器的数量

>事实上`HTML`集合一直与文档保持着连接，每次获取其最新信息时，都会重复执行查询操作，即使只是获取元素数量也是如此，这正是低效之源

## 算法和流程控制

- 避免使用`for-in`循环，除非需要遍历一个属性未知的对象
- 减少每次迭代的计算量和减少循环的迭代次数
- 经常使用但又较少产生变化的数据考虑使用缓存

Last Modified 2022-08-18
