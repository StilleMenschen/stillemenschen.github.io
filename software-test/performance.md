# 性能

## 分析

### 能力

- 工具操作：压力工具、监控工具、剖析工具、调试工具

- 数值理解：吞吐量（如每秒事务数、每秒查询数）、延迟（响应时间）、用户数（线程数）、错误率

- 趋势分析：相关性、证据链

- 调整与优化：DNS、CDN、负载均衡、路由网关、服务注册、应用集群、缓存、队列、关系型数据库、非关系型数据库、操作系统

### 要点

- 对大部分的系统来说，随着压力的增加，对应的参考数据其实不会出现很明显的转折点
- 所有的系统都会出现性能瓶颈，只是看做什么量级的测试
- 随着用户数的增加，响应时间和吞吐量也会增加，但可能吞吐量增加的幅度会变小
- 如果没有增加多大的压力但吞吐量变化非常明显，可能性能瓶颈与压力的相关性不大
- 选择适当的加压策略，保证一定的变化梯度
- 仅在调整压力策略的情况下，不改变运行环境、数据和软硬件资源，那么系统的最大吞吐量上限是固定的
- 如果在适当加压的情况下存在较大的数据抖动，可能要关注系统的动态资源分配和数据预热
- 分析性能衰减的过程，观察在不同的压力下每线程每秒的吞吐量变化，是否出现慢慢衰减并达到最大吞吐量上限
- 了解系统的设计架构，逐级查找性能瓶颈
- 如果找不到具体在哪一个环节出现瓶颈，可以考虑增加某个环节（如增加服务器）

## 报告

```
1 测试概述

1.1 测试目标
1.2 指标和术语
1.3 人员和时间

2 环境和工具

2.1 测试环境
2.2 测试工具

3 测试方案

3.1 性能指标

3.2 测试类型

3.2.1 基准测试
3.2.2 压力测试
3.2.3 稳定性测试

3.3 业务模型

3.4 加密验签处理

3.5 压力梯度

4 测试结果

4.1 聚合报告
4.2 系统吞吐量
4.3 资源使用情况

5 分析和建议

5.1 测试结论
5.2 问题总结
```

Last Modified 2022-02-14
